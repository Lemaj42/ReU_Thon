{{ form_start(form, {'attr': {'id': 'meeting_form'}}) }}
<div class="form-group">
	<div class="form-row">
		<div class="col">
			{{ form_label(form.title, null, {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.title) }}
		</div>
	</div>
	<div class="form-row">
		<div class="col">
			{{ form_label(form.detail, null, {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.detail, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.detail) }}
		</div>
	</div>
	<div class="form-row">
		<div class="col">
			{{ form_label(form.place, null, {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.place, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.place) }}
		</div>
	</div>
</div>
<ul class="bookings" data-index="{{ form.bookings|length > 0 ? form.bookings|last.vars.name + 1 : 0 }}" data-prototype="{{ form_widget(form.bookings.vars.prototype)|e('html_attr') }}"></ul>


<button type="button" class="add_item_link" data-collection-holder-class="bookings">Add a booking</button>


{{ form_end(form) }}


<script>
	function addFormToCollection(e) {
console.log(e.currentTarget.dataset.collectionHolderClass);
const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

const item = document.createElement('li');

item.innerHTML = collectionHolder.dataset.prototype.replace(/__name__/g, collectionHolder.dataset.index);

collectionHolder.appendChild(item);

collectionHolder.dataset.index ++;
};

document.querySelectorAll('.add_item_link').forEach(btn => {
btn.addEventListener("click", addFormToCollection)
});
</script>
